<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal Belajar - Mystical Portal</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh; overflow-x: hidden;
      background: linear-gradient(135deg,#667eea 0%,#764ba2 25%,#8e44ad 50%,#9b59b6 75%,#bb6bd9 100%);
      position: relative;
    }

    /* Containers */
    .container {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      z-index: 10; background: rgba(139,69,19,0.1); backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; padding: 40px;
      width: 400px; max-width: 90vw; box-shadow: 0 25px 50px rgba(0,0,0,.3);
    }
    .dashboard-container { display: none; width: 1000px; max-width: 95vw; padding: 30px; }
    .quiz-container { display: none; width: 900px; max-width: 95vw; padding: 30px; }

    /* Titles */
    .login-title,.dashboard-title{ text-align:center; color:#fff; font-weight:300; letter-spacing:2px; }
    .login-title{ font-size:2.2rem; margin-bottom:24px; }
    .dashboard-title{ font-size:2.4rem; margin-bottom:24px; }

    /* Inputs */
    .input-group{ position:relative; margin-bottom:18px; }
    .form-input{ width:100%; padding:14px 44px 14px 14px; background:rgba(255,255,255,.1);
      border:1px solid rgba(255,255,255,.2); border-radius:10px; color:#fff; outline:none; transition:.3s; }
    .form-input::placeholder{ color:rgba(255,255,255,.7); }
    .input-group i{ position:absolute; right:14px; top:50%; transform:translateY(-50%); color:rgba(255,255,255,.7); }
    .form-input:focus{ background:rgba(255,255,255,.15); border-color:rgba(255,255,255,.4); box-shadow:0 0 20px rgba(255,255,255,.1); }

    .login-btn, .logout-btn, .nav-btn, .pill-btn{
      padding:12px 20px; border-radius:10px; cursor:pointer; transition:.25s;
      border:1px solid rgba(255,255,255,.2); color:#333; font-weight:600;
      background:linear-gradient(45deg,#fff,#f8f9fa);
    }
    .login-btn:hover, .nav-btn:hover{ background:linear-gradient(45deg,#f8f9fa,#e9ecef); transform:translateY(-1px); }
    .logout-btn{ background:rgba(255,255,255,.1); color:#fff; }
    .logout-btn:hover{ background:rgba(255,255,255,.2); }

    /* Subjects grid */
    .subjects-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; margin-top:10px; }
    .subject-card{ background:rgba(255,255,255,.1); backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,.2);
      border-radius:15px; padding:22px; text-align:center; color:#fff; cursor:pointer; transition:.25s; }
    .subject-card:hover{ background:rgba(255,255,255,.15); transform:translateY(-4px); box-shadow:0 15px 30px rgba(0,0,0,.2); }
    .subject-icon{ font-size:2.6rem; margin-bottom:12px; display:block; }
    .subject-name{ font-size:1.1rem; font-weight:700; margin-bottom:6px; }
    .subject-desc{ font-size:.9rem; opacity:.85; }

    /* Quiz area */
    .quiz-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:22px; color:#fff; }
    .quiz-title{ font-size:1.6rem; font-weight:700; }
    .quiz-timer{ font-size:1.05rem; background:rgba(255,255,255,.1); padding:8px 16px; border-radius:10px; border:1px solid rgba(255,255,255,.2); }
    .question-card{ background:rgba(255,255,255,.1); backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,.2);
      border-radius:15px; padding:24px; margin-bottom:18px; color:#fff; }
    .question-number{ font-size:.9rem; opacity:.85; margin-bottom:10px; }
    .question-text{ font-size:1.22rem; font-weight:600; margin-bottom:18px; line-height:1.6; }
    .answers-grid{ display:grid; gap:12px; }
    .answer-option{ background:rgba(255,255,255,.05); border:2px solid rgba(255,255,255,.2); border-radius:10px; padding:14px 16px; color:#fff; display:flex; align-items:center; cursor:pointer; transition:.2s; }
    .answer-option:hover{ background:rgba(255,255,255,.1); border-color:rgba(255,255,255,.4); }
    .answer-option.selected{ background:rgba(187,107,217,.3); border-color:#bb6bd9; }
    .answer-letter{ background:rgba(255,255,255,.2); border-radius:50%; width:28px; height:28px; display:flex; align-items:center; justify-content:center; font-weight:700; margin-right:12px; }
    .quiz-navigation{ display:flex; gap:10px; justify-content:space-between; align-items:center; margin-top:18px; }
    .question-indicator{ color:rgba(255,255,255,.9); font-size:.95rem; }

    /* Upload form */
    .upload-grid{ display:grid; grid-template-columns:1fr; gap:12px; }
    .upload-label{ color:#fff; font-size:.95rem; }
    textarea.form-input{ min-height:90px; resize:vertical; }

    /* Stars/Mountains/Trees (background) */
    .stars{ position:absolute; inset:0; overflow:hidden; z-index:1; }
    .star{ position:absolute; background:#fff; border-radius:50%; animation: twinkle 2s infinite alternate; }
    .mountains{ position:absolute; bottom:0; left:0; width:100%; height:60%; z-index:2; }
    .mountain-layer{ position:absolute; bottom:0; width:100%; height:100%; }
    .mountain-back{ background:linear-gradient(to top,#4a148c 0%,#6a1b9a 50%,#8e24aa 100%);
      clip-path: polygon(0% 100%, 15% 60%, 25% 70%, 35% 50%, 50% 65%, 65% 45%, 80% 60%, 90% 40%, 100% 55%, 100% 100%); opacity:.6; }
    .mountain-front{ background:linear-gradient(to top,#2e003e 0%, #4a148c 70%);
      clip-path: polygon(0% 100%, 20% 75%, 35% 85%, 45% 70%, 60% 80%, 75% 65%, 85% 75%, 100% 60%, 100% 100%); opacity:.8; }
    .trees{ position:absolute; bottom:0; left:0; width:100%; height:40%; z-index:3; }
    .tree{ position:absolute; bottom:0; background:#1a0033; clip-path: polygon(40% 100%, 45% 60%, 35% 60%, 40% 40%, 35% 40%, 45% 20%, 50% 0%, 55% 20%, 65% 40%, 60% 40%, 65% 60%, 55% 60%, 60% 100%); }
    .tree:nth-child(1){ left:5%; width:3%; height:80%; }
    .tree:nth-child(2){ left:12%; width:2.5%; height:60%; }
    .tree:nth-child(3){ left:18%; width:3.5%; height:90%; }
    .tree:nth-child(4){ right:20%; width:2.8%; height:70%; }
    .tree:nth-child(5){ right:12%; width:3.2%; height:85%; }
    .tree:nth-child(6){ right:5%; width:2.5%; height:65%; }

    @keyframes twinkle { 0%{opacity:.3; transform:scale(1);} 100%{opacity:1; transform:scale(1.2);} }

    /* Responsive */
    @media (max-width: 820px){ .dashboard-container{ width:95vw; } .quiz-container{ width:95vw; } }
    @media (max-width: 480px){ .container{ padding:22px 16px; width: 95vw; } .login-title{ font-size:1.8rem; } }
  </style>
</head>
<body>
  <!-- Background -->
  <div class="stars" id="stars"></div>
  <div class="mountains"><div class="mountain-layer mountain-back"></div><div class="mountain-layer mountain-front"></div></div>
  <div class="trees"><div class="tree"></div><div class="tree"></div><div class="tree"></div><div class="tree"></div><div class="tree"></div><div class="tree"></div></div>

  <!-- LOGIN -->
  <div class="container" id="loginContainer">
    <h1 class="login-title">Login</h1>
    <form id="loginForm">
      <div class="input-group">
        <input type="email" class="form-input" placeholder="Email" id="email" required />
        <i class="fas fa-envelope"></i>
      </div>
      <div class="input-group">
        <input type="password" class="form-input" placeholder="Password" id="password" required />
        <i class="fas fa-lock"></i>
      </div>
      <button type="submit" class="login-btn" id="loginBtn">Login</button>
    </form>
  </div>

  <!-- DASHBOARD -->
  <div class="container dashboard-container" id="dashboardContainer">
    <h1 class="dashboard-title">Pilih Menu / Mata Pelajaran</h1>
    <div class="subjects-grid" id="subjectsGrid">
      <div class="subject-card" data-subject="matematika">
        <i class="fas fa-calculator subject-icon"></i>
        <div class="subject-name">Matematika</div>
        <div class="subject-desc">Aljabar, Geometri, Statistika</div>
      </div>
      <div class="subject-card" data-subject="fisika">
        <i class="fas fa-atom subject-icon"></i>
        <div class="subject-name">Fisika</div>
        <div class="subject-desc">Mekanika, Listrik, Optik</div>
      </div>
      <div class="subject-card" data-subject="kimia">
        <i class="fas fa-flask subject-icon"></i>
        <div class="subject-name">Kimia</div>
        <div class="subject-desc">Organik, Anorganik, Fisika</div>
      </div>
      <div class="subject-card" data-subject="biologi">
        <i class="fas fa-dna subject-icon"></i>
        <div class="subject-name">Biologi</div>
        <div class="subject-desc">Genetika, Ekologi, Anatomi</div>
      </div>
      <div class="subject-card" data-subject="matematika-lanjut">
        <i class="fas fa-square-root-alt subject-icon"></i>
        <div class="subject-name">Matematika Tingkat Lanjut</div>
        <div class="subject-desc">Kalkulus, Integral, Diferensial</div>
      </div>
      <div class="subject-card" data-subject="bahasa-indonesia">
        <i class="fas fa-book-open subject-icon"></i>
        <div class="subject-name">Bahasa Indonesia</div>
        <div class="subject-desc">Tata Bahasa, Sastra, Menulis</div>
      </div>
      <div class="subject-card" data-subject="bahasa-inggris">
        <i class="fas fa-globe subject-icon"></i>
        <div class="subject-name">Bahasa Inggris</div>
        <div class="subject-desc">Grammar, Reading, Writing</div>
      </div>
      <!-- Upload Soal ditempatkan tepat setelah Bahasa Inggris -->
      <div class="subject-card" data-subject="upload">
        <i class="fas fa-upload subject-icon"></i>
        <div class="subject-name">Upload Soal</div>
        <div class="subject-desc">Tambah soal & kunci jawaban</div>
      </div>
    </div>
    <div style="text-align:center; margin-top:16px;">
      <button class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</button>
    </div>
  </div>

  <!-- UPLOAD SOAL -->
  <div class="container quiz-container" id="uploadContainer" style="display:none;">
    <div class="quiz-header">
      <div class="quiz-title">Upload Soal</div>
      <button class="logout-btn" id="backToDashboardFromUpload"><i class="fas fa-arrow-left"></i> Kembali</button>
    </div>
    <div class="upload-grid">
      <label class="upload-label">Mata Pelajaran</label>
      <select id="uploadSubject" class="form-input">
        <option value="matematika">Matematika</option>
        <option value="fisika">Fisika</option>
        <option value="kimia">Kimia</option>
        <option value="biologi">Biologi</option>
        <option value="matematika-lanjut">Matematika Tingkat Lanjut</option>
        <option value="bahasa-indonesia">Bahasa Indonesia</option>
        <option value="bahasa-inggris">Bahasa Inggris</option>
      </select>

      <label class="upload-label">Soal</label>
      <textarea id="uploadQuestion" class="form-input" placeholder="Tulis teks soal di sini..."></textarea>

      <label class="upload-label">Pilihan Jawaban</label>
      <input type="text" id="ansA" class="form-input" placeholder="Jawaban A" />
      <input type="text" id="ansB" class="form-input" placeholder="Jawaban B" />
      <input type="text" id="ansC" class="form-input" placeholder="Jawaban C" />
      <input type="text" id="ansD" class="form-input" placeholder="Jawaban D" />

      <label class="upload-label">Kunci Jawaban</label>
      <select id="uploadCorrect" class="form-input">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
      </select>

      <label class="upload-label">Pembahasan</label>
      <textarea id="uploadExplanation" class="form-input" placeholder="Tulis pembahasan/solusi singkat..."></textarea>

      <button class="login-btn" id="saveQuestionBtn"><i class="fas fa-save"></i> Simpan Soal</button>
    </div>
  </div>

  <!-- QUIZ -->
  <div class="container quiz-container" id="quizContainer" style="display:none;">
    <div class="quiz-header">
      <div class="quiz-title" id="quizTitle">Soal Latihan</div>
      <div class="quiz-timer" id="quizTimer"><i class="fas fa-clock"></i> 15:00</div>
    </div>

    <div class="question-card">
      <div class="question-number" id="questionNumber">Soal 1</div>
      <div class="question-text" id="questionText">Teks soal di sini</div>
      <div class="answers-grid" id="answersGrid"></div>
    </div>

    <div class="quiz-navigation">
      <button class="nav-btn" id="prevBtn" disabled><i class="fas fa-chevron-left"></i> Sebelumnya</button>
      <div class="question-indicator" id="questionIndicator">Soal 1</div>
      <div style="display:flex; gap:8px;">
        <button class="nav-btn" id="nextBtn">Selanjutnya <i class="fas fa-chevron-right"></i></button>
        <button class="nav-btn" id="submitBtn" style="display:none;"><i class="fas fa-check"></i> Selesai</button>
      </div>
    </div>

    <div style="margin-top:18px; text-align:center;">
      <button class="logout-btn" id="backToDashboard"><i class="fas fa-arrow-left"></i> Kembali ke Dashboard</button>
    </div>
  </div>

  <script>
    // ====== UTIL: Stars background ======
    function createStars(){
      const starsContainer = document.getElementById('stars');
      const n = 60; // stars
      for(let i=0;i<n;i++){
        const s = document.createElement('div'); s.className='star';
        s.style.left = Math.random()*100+'%'; s.style.top = Math.random()*100+'%';
        const size = Math.random()*3+1; s.style.width=size+'px'; s.style.height=size+'px';
        s.style.animationDuration=(Math.random()*3+1)+'s';
        starsContainer.appendChild(s);
      }
    }

    // ====== LOGIN (hardcode) ======
    const HARD_EMAIL = 'admin@example.com';
    const HARD_PASS  = 'admin123';

    const loginForm = document.getElementById('loginForm');
    const loginContainer = document.getElementById('loginContainer');
    const dashboardContainer = document.getElementById('dashboardContainer');

    loginForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const pass  = document.getElementById('password').value;
      const btn = document.getElementById('loginBtn');
      btn.textContent='Memproses...'; btn.disabled=true;
      setTimeout(()=>{
        if(email===HARD_EMAIL && pass===HARD_PASS){
          showDashboard();
        } else {
          alert('Email atau password salah.');
        }
        btn.textContent='Login'; btn.disabled=false;
      }, 700);
    });

    function showDashboard(){
      loginContainer.style.display='none';
      quizContainer.style.display='none';
      uploadContainer.style.display='none';
      dashboardContainer.style.display='block';
      document.body.style.overflow='hidden';
    }

    // ====== QUIZ BANK (localStorage) ======
    const DEFAULT_BANK = {
      'matematika':[ { question:'Jika f(x) = 2x² + 3x - 1, maka nilai f(2) adalah...', answers:['9','11','13','15'], correct:'C', explanation:'f(2)=2(4)+3(2)-1=8+6-1=13.' }, { question:'Hasil dari integral ∫2x dx adalah...', answers:['x² + C','2x² + C','x² + 2C','2x + C'], correct:'A', explanation:'∫2x dx = x² + C.' } ],
      'fisika':[ { question:'Hukum Newton I menyatakan bahwa...', answers:['F=ma','Benda diam tetap diam jika resultan gaya=0','Aksi=Reaksi','E=mc²'], correct:'B', explanation:'Hukum I: kelembaman; benda mempertahankan keadaan jika ΣF=0.' } ],
      'kimia':[], 'biologi':[], 'matematika-lanjut':[], 'bahasa-indonesia':[], 'bahasa-inggris':[]
    };

    function loadBank(){
      try{ const raw = localStorage.getItem('quizBank'); if(!raw){ saveBank(DEFAULT_BANK); return {...DEFAULT_BANK}; }
        const parsed = JSON.parse(raw); return { ...DEFAULT_BANK, ...parsed };
      }catch(e){ console.warn('Bank rusak, reset default'); saveBank(DEFAULT_BANK); return {...DEFAULT_BANK}; }
    }
    function saveBank(bank){ localStorage.setItem('quizBank', JSON.stringify(bank)); }

    let QUIZ_BANK = loadBank();

    // ====== SUBJECT HANDLERS ======
    const quizContainer = document.getElementById('quizContainer');
    const uploadContainer = document.getElementById('uploadContainer');

    document.querySelectorAll('.subject-card').forEach(card=>{
      card.addEventListener('click',()=>{
        const subject = card.dataset.subject;
        if(subject==='upload') { openUpload(); return; }
        startQuiz(subject);
      });
    });

    function openUpload(){
      dashboardContainer.style.display='none';
      uploadContainer.style.display='block';
    }

    document.getElementById('backToDashboardFromUpload').addEventListener('click',()=>{
      uploadContainer.style.display='none';
      dashboardContainer.style.display='block';
    });

    // ====== UPLOAD SAVE ======
    document.getElementById('saveQuestionBtn').addEventListener('click', ()=>{
      const subj = document.getElementById('uploadSubject').value;
      const q = document.getElementById('uploadQuestion').value.trim();
      const answers = [ 'A','B','C','D' ].map((l)=> document.getElementById('ans'+l).value.trim());
      const correct = document.getElementById('uploadCorrect').value;
      const explanation = document.getElementById('uploadExplanation').value.trim();

      if(!q || answers.some(a=>!a)) { alert('Lengkapi semua kolom soal dan jawaban A–D.'); return; }

      if(!QUIZ_BANK[subj]) QUIZ_BANK[subj]=[];
      QUIZ_BANK[subj].push({ question:q, answers, correct, explanation });
      saveBank(QUIZ_BANK);

      alert('Soal berhasil disimpan ke '+subj.toUpperCase());
      document.getElementById('uploadQuestion').value='';
      ['A','B','C','D'].forEach(l=> document.getElementById('ans'+l).value='');
      document.getElementById('uploadExplanation').value='';
    });

    // ====== QUIZ FLOW ======
    let currentSubject=''; let currentQuestion=1; let totalQuestions=0; let selectedAnswers={}; let timerId=null; let quizTimer=900;

    const subjectNames = {
      'matematika':'Matematika','fisika':'Fisika','kimia':'Kimia','biologi':'Biologi','matematika-lanjut':'Matematika Tingkat Lanjut','bahasa-indonesia':'Bahasa Indonesia','bahasa-inggris':'Bahasa Inggris'
    };

    function startQuiz(subject){
      currentSubject = subject;
      const questions = QUIZ_BANK[subject] || [];
      if(questions.length===0){ alert('Belum ada soal di mata pelajaran ini. Tambahkan lewat "Upload Soal".'); return; }
      currentQuestion = 1; totalQuestions = questions.length; selectedAnswers = {};

      document.getElementById('quizTitle').textContent = subjectNames[subject] + ' - Soal Latihan';
      dashboardContainer.style.display='none'; uploadContainer.style.display='none'; quizContainer.style.display='block';
      document.body.style.overflow='auto';
      startQuizTimer();
      loadQuestion();
    }

    function startQuizTimer(){
      clearInterval(timerId); quizTimer = 15*60; // 15 menit
      const timerEl = document.getElementById('quizTimer');
      timerId = setInterval(()=>{
        const m = Math.floor(quizTimer/60), s = quizTimer%60;
        timerEl.innerHTML = `<i class="fas fa-clock"></i> ${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        if(quizTimer<=0){ clearInterval(timerId); alert('Waktu habis! Quiz diselesaikan otomatis.'); submitQuiz(); }
        quizTimer--;
      },1000);
    }

    function loadQuestion(){
      const questions = QUIZ_BANK[currentSubject];
      const q = questions[Math.min(currentQuestion-1, questions.length-1)];
      document.getElementById('questionNumber').textContent = `Soal ${currentQuestion} dari ${totalQuestions}`;
      document.getElementById('questionText').textContent = q.question;
      document.getElementById('questionIndicator').textContent = `Soal ${currentQuestion} dari ${totalQuestions}`;

      const grid = document.getElementById('answersGrid'); grid.innerHTML='';
      q.answers.forEach((ans, idx)=>{
        const letter = String.fromCharCode(65+idx);
        const div = document.createElement('div'); div.className='answer-option'; div.dataset.answer=letter;
        div.innerHTML = `<span class="answer-letter">${letter}</span><span>${ans}</span>`;
        div.addEventListener('click', function(){
          grid.querySelectorAll('.answer-option').forEach(o=>o.classList.remove('selected'));
          this.classList.add('selected');
          selectedAnswers[currentQuestion]=letter;
        });
        grid.appendChild(div);
      });
      // restore selection
      if(selectedAnswers[currentQuestion]){
        const sel = grid.querySelector(`[data-answer="${selectedAnswers[currentQuestion]}"]`);
        if(sel) sel.classList.add('selected');
      }
      // nav buttons
      document.getElementById('prevBtn').disabled = currentQuestion===1;
      document.getElementById('nextBtn').style.display = currentQuestion===totalQuestions ? 'none':'inline-block';
      document.getElementById('submitBtn').style.display = currentQuestion===totalQuestions ? 'inline-block':'none';
    }

    document.getElementById('prevBtn').addEventListener('click',()=>{ if(currentQuestion>1){ currentQuestion--; loadQuestion(); }});
    document.getElementById('nextBtn').addEventListener('click',()=>{ if(currentQuestion<totalQuestions){ currentQuestion++; loadQuestion(); }});
    document.getElementById('submitBtn').addEventListener('click', submitQuiz);

    function submitQuiz(){
      clearInterval(timerId);
      const questions = QUIZ_BANK[currentSubject];
      let score = 0;
      let reviewHTML = `<div class="quiz-header"><div class="quiz-title">Hasil ${subjectNames[currentSubject]}</div></div>`;

      questions.forEach((q, idx)=>{
        const userAns = selectedAnswers[idx+1] || '-';
        const correct = q.correct; const ok = userAns===correct; if(ok) score++;
        reviewHTML += `
          <div class="question-card" style="border-color:${ok?'#38b000':'#ff4d6d'};">
            <div class="question-number">Soal ${idx+1}</div>
            <div class="question-text" style="margin-bottom:10px;">${q.question}</div>
            <div style="margin-bottom:6px;">Jawaban Anda: <b>${userAns}</b> ${ok?'✅':'❌'}</div>
            <div style="margin-bottom:8px;">Kunci: <b>${correct}</b></div>
            <div style="opacity:.95;"><i class="fas fa-lightbulb"></i> Pembahasan: ${q.explanation? q.explanation : '-'}</div>
          </div>`;
      });

      reviewHTML = `
        <div class="question-card" style="border-color:rgba(255,255,255,.3);">
          <div class="question-text">Skor Akhir: <b>${score} / ${questions.length}</b></div>
          <div>Waktu tersisa: <b>${document.getElementById('quizTimer').innerText.replace(/^[^0-9]*/,'')}</b></div>
        </div>
      ` + reviewHTML + `
        <div style="text-align:center; margin-top:12px; display:flex; gap:8px; justify-content:center;">
          <button class="logout-btn" onclick="showDashboard()"><i class="fas fa-home"></i> Kembali ke Dashboard</button>
          <button class="pill-btn" onclick="startQuiz('${currentSubject}')"><i class="fas fa-redo"></i> Ulangi Quiz</button>
        </div>
      `;

      quizContainer.innerHTML = reviewHTML;
    }

    // ====== LOGOUT & BACK ======
    document.getElementById('logoutBtn').addEventListener('click',()=>{ if(confirm('Logout sekarang?')){ dashboardContainer.style.display='none'; loginContainer.style.display='block'; loginForm.reset(); }});
    document.getElementById('backToDashboard').addEventListener('click',()=>{ if(confirm('Kembali ke dashboard? Progress akan hilang.')) showDashboard(); });

    // ====== Nice touches ======
    window.addEventListener('load', ()=>{
      createStars();
      // entrance anim
      loginContainer.style.opacity='0'; loginContainer.style.transform='translate(-50%, -40%)';
      setTimeout(()=>{ loginContainer.style.transition='all .7s ease'; loginContainer.style.opacity='1'; loginContainer.style.transform='translate(-50%, -50%)'; }, 350);
    });

    // Parallax
    document.addEventListener('mousemove', (e)=>{
      const x = e.clientX / window.innerWidth - .5; const y = e.clientY / window.innerHeight - .5;
      document.querySelectorAll('.star').forEach((st, i)=>{ const sp = (i%3+1)*.5; st.style.transform=`translate(${x*sp}px, ${y*sp}px)`; });
      document.querySelectorAll('.mountain-layer').forEach((m, i)=>{ const sp=(i+1)*.3; m.style.transform=`translateX(${x*sp}px)`; });
    });

    // Scale on very short screens
    function handleResize(){ const h = window.innerHeight; document.querySelectorAll('.container').forEach(c=>{ c.style.transform = h<600 ? 'translate(-50%, -50%) scale(.92)' : 'translate(-50%, -50%) scale(1)'; }); }
    window.addEventListener('resize', handleResize); window.addEventListener('load', handleResize);
  </script>
</body>
</html>
